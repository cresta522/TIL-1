## ファイルパーミッション覚書

ファイルパーミッション　→ 「誰にどのような操作を許可するか」という権限を規定する情報

ls コマンドに　`-l`のオプションをつけると確認できる。

例えばcatコマンドの実行ファイルに対して`ls -l`を使うと

`ls -l /bin/cat`

```
-rwxr-xr-x 1 root root 35080 Sep 5 2019 /bin/cat
```

と表示される。

`-`の部分はファイルタイプ　

記号  | ファイルタイプ
--- | ---
\-  | 通常ファイル
d | ディレクトリ
l | シンボリックリンク

一つ目の`root`はファイルの所有者（オーナー）、二つ目の`root`はファイルが所属するグループを表す

`rwxr-xr-x`の部分がファイルのパーミッションを表している。3文字で1セットでrwx（オーナー)r-x(グループ)r-x(その他の実行者)に対するパーミッションを表している。

記号  | 意味
--- | ---
r | **r**ead 読み取り
w | **w**rite 書き込み
x | e**x**ecute 実行

ファイルタイプがd つまりディレクトリの場合は

記号  | 意味
--- | ---
r | 読み取り: ディレクトリに含まれるファイル一覧の取得
w | 書き込み: ディレクトリの下にあるファイル・ディレクトリの作成・削除
x | 実行: ディレクトリをカレントディレクトリにする

ディレクトリの場合、たとえば読み取りのパーミッションがない場合はlsコマンドでの参照もできない。

ディレクトリの書き込みのパーミッションがある場合、その下にあるファイルは削除できてしまう。**ファイル自身のパーミッションは関係なく削除できてしまうため注意！**

実行のパーミッションがない場合は、cdコマンドを使用してもerrorになる。

他のユーザが閲覧可能な通常のディレクトリは`rwxr-xr-x` 、他のユーザから閲覧されたくないディレクトリの場合は`rwx------`として他のユーザの操作は一切受け付けないようにする。

### ファイルモードの変更

ファイルやディレクトリのパーミッションをいじるときは、chomdコマンドを使用してファイルモードを変更する。

chomdコマンドはスーパーユーザか、そのファイルのオーナーしか使用できない。当たり前ですね。

chomdコマンドにはシンボルモードと数値モードという二つの指定方法がる。

#### シンボルモードでの指定

```
chmod [ugoa(だれに）][+-=(どうする)][rwx（なにを)] <ファイル名>
```

記号  | 意味
--- | ---
u | オーナー
g | グループ
o | その他のユーザ
a | ugo全て

記号  | 意味
--- | ---
+ | 権限を追加する
- | 権限を禁止する
= | 指定した権限と等しくする

### 数値モードでの指定

```
chmod <8進数の数字> <ファイル名>
```

数字  | 意味
--- | ---
4 | 読み取り
2 | 書き込み
1 | 実行

この数字を与えたい権限に応じて選び、その数字を足し合わせる。それから、オーナー、グループ、その他のユーザの順でその合計値を並べて入力する

たとえばrwxr-xr-xを指定したい場合、

<4+2+1> <4+1> <4+1>で　`chmod 755 <ファイル名>`となる。


### まとめ

シンボルモードはたとえば「オーナーの権限だけ変更する」といったパーミッションの一部だけ変更したいときに便利

数値モードは絶対的な指定方法であり、元のパーミッションに関わらず新しいパーミッションの値へと変更する













