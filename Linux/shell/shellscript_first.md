## シェルスクリプトとは

シェルのコマンドラインをあらかじめ記述しておくファイルのこと。

単純なコマンドだけでなく、条件分岐や繰り返しを利用した複雑な処理を可能にしたり、一度使って今後再利用する処理を保存しておくことができる。ミスタイプの防止にもなり、作業ミスを減らすことにつながる。

### シェルスクリプトを作成

手順としては以下のよう。

1. `vim new_shell_script.sh`でファイルを新規作成。
    - このときファイルの先頭には`#!/bin/bash`と記載する(shebangシバンという)
    - ファイルの拡張子はなくてもよいが、ファイル名をみただけで「これはシェルスクリプトだ」とわかるように.shを明示しておくと良い。
2. `chmod +x new_shell_script.sh`で実行権限を付加
3. `./new_shell_script.sh`でファイルを実行
    - `./`を忘れないように。（カレントディレクトリで実行するという意味)

### シバン shebang について

ファイル先頭に記述する`#!/bin/bash`はシバンshebangといい、「このシェルスクリプトは/bin/bashで実行します」と宣言している。

シバンのないシェルスクリプトは`sourse`コマンドをつけることで読み込むことができる。

sourseコマンドは、指定したファイルの1行1行を今動かしているコマンドライン上で実行するような動作。コマンドラインに行を流し込むイメージ

反対に、シバンをいれて実行するときはカレントシェルからサブシェルを呼び出して、そこで実行するようなイメージ

つまり、sourseコマンドを使用する場合と、そうでない場合では若干動作のズレが生じる。

カレントシェルでエイリアスを設定していた場合には、サブシェルにはその設定は読み込まれていないわけなので、エラーが出たり、sourseコマンドでエイリアスを設定するようなシェルスクリプトを実行してしまうと
実行後はカレントシェルにも影響を及ぼしてしまう。

ちなみにsourseコマンドのかわりに、`.`コマンドを使用しても動作は同じ

`sourse ./new_shell_script.sh` と `. ./new_shell_script.sh`は同じ。

### sourseコマンドを使用せず実行する方法がおすすめ

- シバンによってシェルを指定することで、どの環境でも正常な動作が得られる
- sourseコマンドでの実行はカレントシェルの設定を（良くも悪くも）引き継いでしまったり、処理終了後にカレントシェルに爪痕を残す恐れがある。

以上のような理由から、sourseコマンドを使用して実行する方式より、シバンを記述して、ファイル名で直接実行する方式がお勧めされている。







