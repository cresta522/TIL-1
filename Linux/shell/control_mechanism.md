## シェルスクリプトの制御機構について

### if

if文の構造

```
if <コマンド1> ; then
    <コマンド1>の結果が真である場合の処理
elif <コマンド2> ; then
    <コマンド2>の結果が真である場合の処理
elif <コマンド3> ; then
    <コマンド3>の結果が真である場合の処理
else <コマンド4> ; then
    上記の結果が全て偽である場合の処理
fi
```
if文でよく出てくる`[`も実は組み込みのコマンド。コマンド`[`はその後ろに条件式を引数にとり、最後に`]`という引数を取る。

条件式を書く際に

```
if [ "$1" = "bin" ]; then
```
というように、それぞれの間にスペースを置いていたのは、`[`がコマンドだから。

testコマンドっていうのは`[`コマンドと同じような働きで使えるみたい。`[`コマンドってなんて発音したらいいかわかりにくいので、ひとくくりに、testコマンドっていうんだって。

### testコマンドによる文字列の比較

演算子 | 内容
--- | ---
str1 = str2 | str1とstr2が等しい
str1 != str2 | str1とstr2が等しくない
-n str1 | str1が空文字列ではない
-z str1 | str1が空文字列である。

### testコマンドによる整数の比較

演算子 | 内容
--- | ---
int1 -eq int2 | int1とint2が等しい
int1 -nq int2 | int1とint2が等しくない
int1 -lt int2 | int1がint2より小さい
int1 -le int2 | int1がint2以下
int1 -gt int2 | int1がint2より大きい
int1 -ge int2 | int1がint2以下

### ファイル属性の評価

演算子 | 内容
--- | ---
-e file | fileが存在する
-d file | fileが存在し、ディレクトリである
-h file | fileが存在し、シンボリックリンクである
-L file | fileが存在し、シンボリックリンクである
-f file | fileが存在し、通常のファイルである
-r file | fileが存在し、読み取りパーミッションが与えられている
-w file | fileが存在し、書き込みパーミッションが与えられている
-x file | fileが存在し、実行パーミッションが与えられている
file1 -nt file2 | file1の変更時刻がfile2より新しい
file1 -おt file2 | file1の変更時刻がfile2より古い

### 結合演算子

複数の条件式を指定したい場合には、演算子を結合することができる。

演算子 | 内容
--- | ---
条件式1 -a 条件式2 | AND
条件式1 -o 条件式2 | OR
! 条件式 | NOT
( ) | 条件式をグループ化

`<コマンド1> && <コマンド2>` コマンド1の終了ステータスが0、すなわちコマンド1が正常終了した場合はコマンド2を実行する。

`<コマンド1> || <コマンド2>` コマンド1の終了ステータスが0でない場合、すなわちコマンド1が正常終了しなかった場合にコマンド2を実行する。




